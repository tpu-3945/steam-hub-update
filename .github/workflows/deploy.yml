# Nom du workflow qui apparaÃ®tra dans l'onglet "Actions" de votre dÃ©pÃ´t GitHub
name: DÃ©ployer sur GitHub Pages

# DÃ©clencheur : Ce workflow s'exÃ©cute Ã  chaque fois que vous poussez du code sur la branche "main"
on:
  push:
    branches: [ "main" ]

# Permissions : Autorise le workflow Ã  Ã©crire sur la section "Pages" de votre dÃ©pÃ´t
permissions:
  contents: read
  pages: write
  id-token: write

# TÃ¢ches Ã  exÃ©cuter
jobs:
  build-and-deploy:
    # Utilise la derniÃ¨re version d'Ubuntu comme environnement d'exÃ©cution
    runs-on: ubuntu-latest
    
    steps:
      # Ã‰tape 1 : RÃ©cupÃ¨re le code de votre dÃ©pÃ´t
      - name: RÃ©cupÃ©ration du code ğŸ›ï¸
        uses: actions/checkout@v4

      # Ã‰tape 2 : Installe Node.js
      - name: Installation de Node.js ğŸŸ©
        uses: actions/setup-node@v4
        with:
          node-version: '18' 
          cache: 'npm'       

      # Ã‰tape 3 : Installe toutes les dÃ©pendances de votre projet
      - name: Installation des dÃ©pendances ğŸ“¦
        run: npm install  # <-- C'EST LA LIGNE QUI A Ã‰TÃ‰ CHANGÃ‰E (avant c'Ã©tait npm ci)

      # Ã‰tape 4 : Construit l'application pour la production
      - name: Construction du projet ğŸ—ï¸
        run: npm run build

      # Ã‰tape 5 : Configure GitHub Pages
      - name: Configuration de GitHub Pages âš™ï¸
        uses: actions/configure-pages@v5

      # Ã‰tape 6 : Uploade le dossier 'build'
      - name: Upload de l'artefact â¬†ï¸
        uses: actions/upload-pages-artifact@v3
        with:
          path: './build'

      # Ã‰tape 7 : DÃ©ploie sur GitHub Pages
      - name: DÃ©ploiement sur GitHub Pages ğŸš€
        id: deployment
        uses: actions/deploy-pages@v4```

### **Ce qu'il faut faire maintenant :**

1.  AprÃ¨s avoir collÃ© le nouveau code dans l'Ã©diteur de GitHub, allez en haut Ã  droite et cliquez sur le bouton vert **"Commit changes..."**.
2.  Vous pouvez laisser le message par dÃ©faut ou Ã©crire "fix: Use npm install instead of npm ci".
3.  Cliquez sur le bouton vert **"Commit changes"** pour confirmer.

Cette action va sauvegarder la modification et **relancer automatiquement le workflow de dÃ©ploiement**. Allez dans l'onglet "Actions" de votre dÃ©pÃ´t pour suivre la progression.

Cette fois, l'Ã©tape "Installation des dÃ©pendances" devrait passer sans erreur et votre site sera dÃ©ployÃ© avec succÃ¨s.
