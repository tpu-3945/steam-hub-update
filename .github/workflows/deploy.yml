# Nom du workflow qui apparaÃ®tra dans l'onglet "Actions" de votre dÃ©pÃ´t GitHub
name: DÃ©ployer sur GitHub Pages

# DÃ©clencheur : Ce workflow s'exÃ©cute Ã  chaque fois que vous poussez du code sur la branche "main"
on:
  push:
    branches: [ "main" ]

# Permissions : Autorise le workflow Ã  Ã©crire sur la section "Pages" de votre dÃ©pÃ´t
permissions:
  contents: read
  pages: write
  id-token: write

# TÃ¢ches Ã  exÃ©cuter
jobs:
  build-and-deploy:
    # Utilise la derniÃ¨re version d'Ubuntu comme environnement d'exÃ©cution
    runs-on: ubuntu-latest
    
    steps:
      # Ã‰tape 1 : RÃ©cupÃ¨re le code de votre dÃ©pÃ´t pour que le workflow puisse l'utiliser
      - name: RÃ©cupÃ©ration du code ğŸ›ï¸
        uses: actions/checkout@v3

      # Ã‰tape 2 : Installe Node.js, l'environnement nÃ©cessaire pour faire tourner React et npm
      - name: Installation de Node.js ğŸŸ©
        uses: actions/setup-node@v3
        with:
          node-version: '18' # Utilise la version 18 de Node.js
          cache: 'npm'       # Met en cache les dÃ©pendances pour accÃ©lÃ©rer les futurs builds

      # Ã‰tape 3 : Installe toutes les dÃ©pendances de votre projet (React, etc.)
      - name: Installation des dÃ©pendances ğŸ“¦
        run: npm ci # 'npm ci' est une version plus rapide et stricte de 'npm install' pour l'automatisation

      # Ã‰tape 4 : Construit l'application pour la production. 
      # npm run build crÃ©e un dossier 'build' avec tous vos fichiers HTML/CSS/JS optimisÃ©s.
      - name: Construction du projet ğŸ—ï¸
        run: npm run build

      # Ã‰tape 5 : Configure GitHub Pages pour accepter le dÃ©ploiement
      - name: Configuration de GitHub Pages âš™ï¸
        uses: actions/configure-pages@v3

      # Ã‰tape 6 : Uploade le dossier 'build' comme un "artefact" que GitHub Pages peut utiliser
      - name: Upload de l'artefact â¬†ï¸
        uses: actions/upload-pages-artifact@v2
        with:
          path: './build'

      # Ã‰tape 7 : DÃ©ploie l'artefact uploadÃ© sur GitHub Pages
      - name: DÃ©ploiement sur GitHub Pages ğŸš€
        id: deployment
        uses: actions/deploy-pages@v2
